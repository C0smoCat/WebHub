# Коллекции

## List

**List<T>** или список представляет набор значений. В других языках программирования ему соответствуют массивы. Определим список чисел:

```dart
var list = [1, 2, 3];
```

Также мы можем явно указать тип:

```dart
List<int> list = [1, 2, 3];
```

При определении массива ему присваивается список элементов в квадратных скобках.

Для обращения к элементам массива применяются индексы. Индекс представляет номер элемента в массиве, при этом нумерация начинается с нуля, поэтому индекс первого элемента будет равен 0. А чтобы обратиться к четвертому элементу в массиве, нам надо использовать индекс 3, к примеру: `list[3]`. Используем индексы для получения и установки значений элементов массива:

```dart
void main () {
    
    var list = [2, 4, 6];
    list[1] = 5;        // установка 2-го элемента
    int d = list[2];    // получем 3-й элемент
    print(d);              // 6
}
```

Если мы попытаемся обратиться по несуществующему индексу, то мы столкнемся с ошибкой:

```dart
var list = [2, 4, 6];
list[6] = 5;
```

В данном случае в списке только 3 элемента, поэтому элемента с индексом 6 в списке не существует.

Для перебора списка мы можем использовать встроенные циклы for/while:

```dart
void main () {
    
    var list = [2, 4, 6];
    for (int i=0; i < list.length; i++) {
        print(list[i]);
    }
}
```

В данном случае переменная-счетчик i выполняет роль индекса. Увеличение индекса будет происходить, пока он не достигнет значения list.length, то есть длины списка.

Но также мы можем использовать специальную форму цикла для коллекций:

```dart
void main () {
    
    var list = [2, 4, 6];
    for (var n in list) {
        print(n);
    }
}
```

При переборе списка list каждый перебираемый элемент помещается в переменную n, после чего мы можем вывести ее значение на консоль.

### Фиксированные и нефиксированные списки

Списки могут быть фиксированными (с жестко определенным размером) и нефиксированные (могут увеличиваться в размерах). НЕфиксированный список может быть создан через конструктор `List()` или с помошью `[]`. Примеры создания нефиксированных списков:

```dart
var list1 = [];
var list2 = [2, 4, 6];
var list3 = List<int>();
```

Отличительной особенностью нефиксированных списков является то, что мы можем динамически изменять их размер, например, с помощью метода **add()** добавить новые элементы:

```dart
void main () {
    
    var list1 = [3];
    list1.add(1);
    list1.add(4);
    list1.add(5);
    for (var n in list1) {
        print(n);
    }
}
```

Консольный вывод:

```

```

Для создания фиксированного списка в конструктор List() передается размер списка:

```dart
void main () {
    
    var list1 = List<int>(4); // фиксированный список
    list1[0] = 3;
    list1[1] = 7;
    list1[2] = 11;
    list1[3] = 15;
    //list1.add(1);    // нельзя добавить новый элемент
    
    for (var n in list1) {
        print(n);
    }
}
```

### Свойства и методы списков

Основные свойства списков:
- **first**: возвращает первый элемент
- **last**: возвращает последний элемент
- **length**: возвращает длину списка
- **reversed**: возвращает список, в котором все элементы расположены в противоположном порядке
- **isEmpty**: возвращает true, если список пуст

Основные методы списков:
- **add(E value)**: добавляет элемент в конец списка
- **addAll(Iterable<E> iterable)**: добавляет в конец списка другой список
- **clear()**: удаляет все элементы из списка
- **indexOf(E element)**: возвращает первый индекс элемента
- **insert(int index, E element)**: вставляет элемент на определенную позицию
- **remove(Object value)**: удаляет объект из списка (удаляется только первое вхождение элемена в список)
- **removeAt(int index)**: удаляет элементы по индексу
- **removeLast()**: удаляет последний элемент списка
- **forEach(void f(E element))**: производит над элементами списка некоторое действие, которое задается функцией-параметром, аналоги цикла for..in
- **sort()**: сортирует список
- **sublist(int start, [ int end ])**: возвращает часть списка от индекса start до индекса end
- **contains(Object element)**: возвращает true, если элемент содержится в списке
- **join([String separator = "" ])**: объединяет все элементы списка в строку. Можно указать необязательный параметр separator, который будет раздлять элементы в строке
- **skip(int count)**: возвращает коллекцию, в которой отсутствуют первые count элементов
- **take(int count)**: возвращает коллекцию, которая содержит первые count элементов
- **where(bool test(E element))**: возвращает коллекцию, элементы которой соответствуют некоторому условию, которое передается в виде функции

Это только краткий перечень основных функциональных возможностей класса List. Полный список полей/методов/конструкторов можно посмотреть в [документации](https://api.dart.dev/stable/2.4.0/dart-core/List-class.html)

Примение некоторых полей и методов

```dart
void main () {
    
    var list = [-3, -1, 2, 4, 5, 7];
    // получим первый элемент
    print(list.first);    // -3
    // получим первый элемент
    print(list.last);    // 7
    // получим первый элемент
    print(list.length);    // 6
    
    // добавим список
    list.addAll([4, 6]);
    
    // соединим элементы списка в строку, разделитель запятая
    print(list.join(", "));    // -3, -1, 2, 4, 5, 7, 4, 6
    
    // отсортируем список
    list.sort();
    print(list.join(", "));    // -3, -1, 2, 4, 4, 5, 6, 7
    
    // удалим число 4
    list.remove(4);
    // удалим второй элемент
    list.removeAt(1);
    print(list.join(", "));    // -3, 2, 4, 5, 6, 7
    
    // получим элементы больше  2
    list = list.where((element) => element > 2).toList();
    print(list.join(", "));    // 4, 5, 6, 7
}
```


> Материал взят с сайта metanit.com