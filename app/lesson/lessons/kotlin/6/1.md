# Обобщения

## Обобщенные классы и функции

Обобщения представляют технику, посредством которой методы и классы могут использовать объекты, типы которых на момент определения классов и методов неизвестны. Обобщения позволяют определять шаблоны, в которые можно подставлять различные типы.

### Обобщенные типы

Обобщенные типы (generic types) представляют типы, в которых типы объектов параметризированы. Например, чтобы уникально идентифицировать каждый объект определенного типа, мы можем определить свойство-идентификатор, которое будет иметь у каждого объекта уникальное значение. Однако какой тип будет представлять данное свойство? В зависимости от условий мы можем использовать числовые идентификаторы или строковые или каких-то других типов данных. Чтобы не привязываться к конкретному типу на момент определения класса, мы можем сделать класс обобщенным:

```kotlin
class Person<T>(val id: T, _name: String) {
    var name: String = _name
}}
```

Класс Person использует параметр T. Параметры указываются после имени класса в угловых скобках. Данный параметр будет представлять некоторый тип данных, который на момент определения класса неизвестен. В первичном конструкторе определяется свойство id, которое представляет идентификатор. Оно представляет тип, который передается через параметр T. На момент определения класса Person мы не знаем, что это будет за тип.

Также первичный конструктор принимает обычный параметр _name, который имеет тип String и значение которого передается свойству name.

При использовании типа Person необходимо его типизировать определенным типом, то есть указать, какой тип будет передаваться через параметр T:

```kotlin
fun main(args: Array<String>) {

    var tom: Person<Int> = Person<Int>(367, "Tom")
    var bob: Person<String> = Person<String>("A65", "Bob")

    println("${tom.id} - ${tom.name}")
    println("${bob.id} - ${bob.name}")
}

class Person<T>(val id: T, _name: String) {
    var name: String = _name
}
```

Для типизации объекта после названия типа в угловых скобках указывается конкретный тип:

```kotlin
var tom: Person<Int>
```

В данном случае мы говорим, что параметр T фактически будет представлять тип Int. Поэтому в конструктор объекта Person для свойства id необходимо  передать числовое значение Int:

```kotlin
Person<Int>(367, "Tom")
```

Второй объект типизируется типом String, поэтому в конструкторе для свойства id передается строка:

```kotlin
var bob: Person<String> = Person<String>("A65", "Bob")
```

Если конструктор использует параметр T, то в принципе мы можем не указывать, каким типом типизируется объект - данный тип будет выводиться из типа параметра конструктора:

```kotlin
var tom = Person(367, "Tom")
var bob = Person("A65", "Bob")
```

Можно одновременно использовать несколько параметров:

```kotlin
fun main(args: Array<String>) {

    var word1: Word<String, String> = Word("one", "один")
    var word2: Word<String, Int> = Word("two", 2)

    println("${word1.source} - ${word1.target}")    // one - один
    println("${word2.source} - ${word2.target}")    // two - 2
}

class Word<K, V>(_source: K, _target: V) {
    val source: K = _source
    var target: V = _target
}
```

### Обобщенные функции

Функции, как и классы, могут быть обобщенными.

```kotlin
fun main(args: Array<String>) {

    var item1 = getItem<Int>(1,2,3)
    var item2 = getItem<String>("red", "green", "blue")
    println(item1)
    println(item2)
}
val random = java.util.Random()

fun <T> getItem(a: T, b: T, c: T): T{
    var n = random.nextInt(3)
    if (n==1) return a
    else if (n==2) return b
    else return  c
}
```

Функция `getItem()` параметризирована параметром T. Параметр также указывается в угловых скобках перед названием функции. Функция принимает три параметра типа T и возвращает объект этого же типа. В ней используется стандартный класс Random, который определен в Java и который представляет генератор случайных чисел. И в зависимости от сгенерированого числа возвращается то или иное значение. И при использовании функции мы можем передавать в нее данные любых типов.


> Материал взят с сайта metanit.com