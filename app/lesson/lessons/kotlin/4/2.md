## Свойства

Каждый класс может хранить некоторые данные или состояние (state) в виде свойств. Свойства представляют переменные, определенные на уровне класса с ключевыми словами val и var. Если свойство определено с помощью **val**, то значение такого свойства можно установить только один раз, то есть оно immutable. Если свойство определено с помощью **var**, то значение этого свойства можно многократно изменять.

Свойство должно быть инициализировано, то есть обязательно должно иметь начальное значение. Например, определим пару свойств:

```kotlin
class Person{
    var name: String = "Tom"
    var age: Int = 18
}
```

В данном случае в классе Person, который представляет человека, определены свойства name (имя человека) и age (возраст человека). И эти свойства инициализированы начальными значениями.

Поскольку эти свойства определены с **var**, то мы можем изменить их начальные значения:

```kotlin
fun main(args: Array<String>) {

    val bob: Person = Person()    // создаем объект
    println(bob.name)       // Tom
    println(bob.age)        // 18

    bob.name = "Bob"
    bob.age = 25

    println(bob.name)       // Bob
    println(bob.age)        // 25
}

class Person{
    var name: String = "Tom"
    var age: Int = 18
}
```

Для обращения к свойствам используется имя переменной, которая предствляет объект, и после точки указывается имя свойства. Например, получение значения свойства:

```kotlin
val personName : String = bob.name
```

Установка значения свойства:

```kotlin
bob.name = "Bob"
```

### Геттеры и сеттеры

Для каждого свойства можно определять геттер и сеттер.

Геттер управляет получением значения свойства и определяется с помощью слова **get**:

```kotlin
class Person{
    var name: String = "Tom"
    var age: Int = 18

    val info: String
        get() = "Name: $name  Age: $age"
}
```

Здесь свойство info определяет блок get, который возвращает информацию с именем и возрастом человека. То есть при получении значения свойства мы будем получать именно те данные, которые возвращаются блоком get.

Стоит отметить, что свойство, которое определено с помощью val и у которого явным образом определен блок get, можно не инициализировать. Также стоит отметить, что это свойство неизменяемое, мы не можем извне явным образом изменить его значение, так как оно определено с помощью val. Однако мы можем изменить имя и возраст, и тогда свойство info будет возвращать измененную информацию:

```kotlin
fun main(args: Array<String>) {

    val bob: Person = Person()
    bob.name = "Bob"
    bob.age = 25

    println(bob.info)    // Name: Bob    Age: 25
    // bob.info = "qwerty" // так нельзя - свойство info неизменяемое
}
```

Сеттер определяет логику установки значения. Он определяется с помощью слова **set**. Например, выше определено свойство age, которое хранит возраст пользователя, но теоретически мы можем установить любой возраст: 2, 6, -200, 100500. И не все эти значения будут корректными. Например, у человека не может быть отрицательного возраста. И для проверки входных значений можно использовать сеттер:

```kotlin
class Person{
    var name: String = "Tom"
    
    var age: Int = 18
    set(value) {
        if ((value>0) and (value <110))
            field = value
    }

    val info: String
        get() = "Name: $name  Age: $age"
}
```

Блок set определяется также, как и блок get, сразу после свойства, при этом блок set фактически представляет собой функцию, которая принимает один параметр - value, через этот параметр передается устанавливаемое значение. Например, в выражении `bob.age = 25` число 25 и будет представлять тот объект, который будет храниться в value.

В блоке set проверяем, входит ли устанавливаемое значение в диапазон допустимых значений. Если входит, то есть если значение корректно, то передаем его объекту **field**. Если значение некорректно, то свойство просто сохраняет свое предыдущее значение.

Идентификатор **field** представляет автоматически генерируемое поле, которое непосредственно хранит значение свойства. То есть свойства фактически представляют надстройку над полями, но напрямую в классе мы не можем определять поля, мы можем работать только со свойствами. Стоит отметить, что к полю через идентификатор field можно обратиться только в геттере или в сеттер, и в каждом конкретном свойстве можно обращаться только к своему полю.

Используем сеттер:

```kotlin
fun main(args: Array<String>) {

    val bob: Person = Person()
    bob.name = "Bob"
    bob.age = 25        // вызываем сеттер

    println(bob.info)    // Name: Bob    Age: 25
    bob.age = -8        // вызываем сеттер
    println(bob.info)    // Name: Bob    Age: 25
}
```

При втором обращении к сеттеру (`bob.age = -8`) можно заметить, что значение свойства age не изменилось. Так как новое значение -8 не входит в диапазон от 0 до 110.

Можно использовать одновременно и геттер, и сеттер:

```kotlin
class Person{
    var name: String = "Tom"
    get() {
        return  field.toUpperCase()
    }
    set(value) {
        if (value.length > 2)
            field = value
    }

    var age: Int = 18
    set(value) {
        if ((value > 0) and (value < 110))
            field = value
    }

    val info: String
        get() = "Name: $name  Age: $age"
}
```

Здесь для свойства name добавлены геттер и сеттер. В блоке get возвращается имя человека через field, причем для символов имени применяется верхний регистр. В блоке set устанавливается имя человека, если устанавливаемое значение имеет больше двух символов.


> Материал взят с сайта metanit.com