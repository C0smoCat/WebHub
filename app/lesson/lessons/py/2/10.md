## Модули

Модуль в языке Python представляет отдельный файл с кодом, который можно повторно использовать в других программах.

Для создания модуля необходимо создать собственно файл с расширением ***.py**, который будет представлять модуль. Название файла будет представлять название модуля. Затем в этом файле надо определить одну или несколько функций.

Пусть основной файл программы будет называться **hello.py**. И мы хотим подключить к нему внешние модули.

Для этого сначала определим новый модуль: создадим новый файл, который назовем **account.py**, в той же папке, где находится hello.py. Если используется PyCharm или другая IDE, то оба файла просто помещаются в один проект.

![Модули в Python](https://metanit.com/python/tutorial/pics/2.1.png)

Соответственно модуль будет называться **account**. И определим в нем следующий код:

```py
def calculate_income(rate, money, month):
    if money <= 0:
        return 0
 
    for i in range(1, month+1):
        money = round(money + money * rate / 100 / 12, 2)
    return money
```

Здесь определена функция calculate_income, которая в качестве параметров получает процентную ставку вклада, сумму вклада и период, на который делается вклад, и высчитывает сумму, которая получится в конце данного периода.

В файле **hello.py** используем данный модуль:

```py
#! Программа Банковский счет
import account
 

rate = int(input("Введите процентную ставку: "))
money = int(input("Введите сумму: "))
period = int(input("Введите период ведения счета в месяцах: "))
 
result = account.calculate_income(rate, money, period)
print("Параметры счета:\n", "Сумма: ", money, "\n", "Ставка: ", rate, "\n",
        "Период: ", period, "\n", "Сумма на счете в конце периода: ", result)
```

Для использования модуля его надо импортировать с помощью оператора **import**, после которого указывается имя модуля: `import account`.

Чтобы обращаться к функциональности модуля, нам нужно получить его **пространство имен**. По умолчанию оно будет совпадать с именем модуля, то есть в нашем случае также будет называться **account**.

Получив пространство имен модуля, мы сможем обратиться к его функциям по схеме **пространство_имен.функция**:

```py
account.calculate_income(rate, money, period)
```

И после этого мы можем запустить главный скрипт hello.py, и он задействует модуль account.py. В частности, консольный вывод мог бы быть следующим:

```

```

### Настройка пространства имен

По умолчанию при импорте модуля он доступен через одноименное пространство имен. Однако мы можем переопределить это поведение. Так, ключевое слово **as** позволяет сопоставить модуль с другим пространством имен. Например:

```py
import account as acc

#...............

result = acc.calculate_income(rate, money, period)
```

В данном случае пространство имен будет называться **acc**.

Другой вариант настройки предполагает импорт функциональности модуля в глобальное пространство имен текущего модуля с помощью ключевого слова **from**:

```py
from account import calculate_income

#...............

result = calculate_income(rate, money, period)
```

В данном случае мы импортируем из модуля account в глобальное пространство имен функцию calculate_income. Поэтому мы сможем ее использовать без указания пространства имен модуля как если бы она была определена в этом же файле.

Если бы в модуле account было бы несколько функций, то могли бы их импортировать в глобальное пространство имен одним выражением:

```py
from account import *

#...............

result = calculate_income(rate, money, period)
```

Но стоит отметить, что импорт в глобальное пространство имен чреват коллизиями имен функций. Например, если у нас  том же файле определена функция с тем же именем, то при вызове функции мы можем получить ошибку. Поэтому лучше избегать использования импорта в глобальное пространство имен.

### Имя модуля

В примере выше модуль hello.py, который является главным, использует модуль account.py. При запуске модуля hello.py программа выполнит всю необходимую работу. Однако, если мы запустим отдельно модуль account.py сам по себе, то ничего на консоли не увидим. Ведь модуль просто определяет функцию и невыполняет никаких других действий. Но мы можем сделать так, чтобы модуль account.py мог использоваться как сам по себе, так и подключаться в другие модули.

При выполнении модуля среда определяет его имя и присваивает его глобальной переменной **__name__** (с обеих сторон два подчеркивания). Если модуль является запускаемым, то его имя равно **__main__** (также по два подчеркивания с каждой стороны). Если модуль используется в другом модуле, то в момент выполнения его имя аналогично названию файла без расширения py. И мы можем это использовать. Так, изменим содержимое файла **account.py**:

```py
def calculate_income(rate, money, month):
    if money <= 0:
        return 0

    for i in range(1, month+1):
        money = round(money + money * rate / 100 / 12, 2)
    return money

    
def main():
    rate = 10
    money = 100000
    period = 12

    result = calculate_income(rate, money, period)
    print("Параметры счета:\n", "Сумма: ", money, "\n", "Ставка: ", rate, "\n",
          "Период: ", period, "\n", "Сумма на счете в конце периода: ", result)

if __name__=="__main__":
    main()
```

Следует обратить внимание на вызов функции main:

```py
if __name__=="__main__":
    main()
```

Переменная **__name__** указывает на имя модуля. Для главного модуля, который непосредственно запускается, эта переменная всегда будет иметь значение **__main__** вне зависимости от имени файла.

Поэтому, если мы будем запускать скрипт account.py отдельно, сам по себе, то Python присвоит переменной __name__ значение `__main__`, далее в выражении if вызовет функцию main из этого же файла.

Однако если мы будем запускать другой скрипт, а этот - account.py - будем подключать в качестве вспомогательного, для account.py переменная __name__ будет иметь значение `account`. И соответственно метод main в файле account.py не будет работать.

Данный подход с проверкой имени модуля является более рекомендуемым подходом, чем просто вызов метода main.

В файле hello.py также можно сделать проверку на то, является ли модуль главным (хотя в прицнипе это необязательно):

```py
#! Программа Банковский счет
import account


def main():
    rate = int(input("Введите процентную ставку: "))
    money = int(input("Введите сумму: "))
    period = int(input("Введите период ведения счета в месяцах: "))

    result = account.calculate_income(rate, money, period)
    print("Параметры счета:\n", "Сумма: ", money, "\n", "Ставка: ", rate, "\n",
          "Период: ", period, "\n", "Сумма на счете в конце периода: ", result)
          
if __name__ == "__main__":
    main()
```


> Материал взят с сайта metanit.com