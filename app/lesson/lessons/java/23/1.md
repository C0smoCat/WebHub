# Публикация приложения

## Создание подписанного apk

После создания приложения, его тестирования и отладки мы можем приступить к его публикации. Суть публикации заключается в создании файла с расширением .apk, которое будет представлять приложение, и его последующее размещение в Google Play Market или на других внешних сайтах. По умолчанию в процессе отладки и создания приложения файл apk уже создается, и мы можем его найти в папке проекта по пути Название_проекта\app\build\outputs\apk. По умолчанию файл называется app-debug.apk и представляет debug-версию.

Но для полноценно публикации данного файла может оказаться недостаточно. И нам еще дополнительно надо произвести некоторую подготовку проекта к релизу. Для это следует указать в файле манифеста у элемента `<manifest>` установлены атрибуты **android:versionCode** и **android:versionName**. Также в файле манифеста элемент `<application>` не должен содержать атрибута **android:debuggable**

Кроме того, на этом этапе можно установить иконку для приложения, которая будет отображаться на рабочем экране гаджета, название приложения (атрибут **android:label** у элемента), а также можно задать лицензионное соглашение.

В файле манифеста также следует определить название пакета (атрибут package элемента `<manifest>`), которое будет использоваться для приложения в дальнейшем. По умолчанию при разработке в Android Studio пакеты приложений начинаются с com.example. Не стоит оставлять данное название, так как название пакета будет служить уникальным идентификатором вашего приложения. Например, ниже в моем случае названием пакета служит "com.maverics.eugene.telephonelist":

```html
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.maverics.eugene.telephonelist"
    android:versionName="1.0"
    android:versionCode="1" >
//.............................
```

При этом если в файлах кода java название пакета в начале файла также должно соответствовать пакету приложения.

### Установка требований

На этапе подготовки к релизу также можно установить требования к API. Например, наше приложение имеет определеную минимальную версию ОС Android, поэтому мы можем установить в файле манифеста соответствующие атрибуты у элемента `<uses-sdk>`

- `android:minSdkVersion` — минимальная версия Android

- `android:targetSdkVersion` — оптимальная версия API

- `android:maxSdkVersion` — максимальная версия системы

Например, пусть минимальная версия Jelly Beans 4.1.2, а оптимальная KitKat 4.4.4:

```html
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.maverics.eugene.telephonelist"
    android:versionName="1.0"
    android:versionCode="1" >
    <uses-sdk android:minSdkVersion="16" android:targetSdkVersion="19" />
//.............................
```

### Подпись приложения

Когда все уже готово, приложение для Android должно быть подписано сертификатом, благодаря которому можно идентифицировать автора приложения. Когда мы тестируем приложение, устанавливая его через Android Studio на устройство, то оно подписывается автоматически. Но для создания релиз-версии нам надо произвести дополнительно ряд действий.

При создании сертификата следует помнить, что при обновлении приложения система будет сравнивать сертификаты старой и новой версии. И обновление будет происходить, если сертификаты обоих версий совпадут. Но если новая версия будет подписана новым сертификатом, то приложение будет расцениваться как совершенно новое, никак не связанное со старой версией и представляющее совершенно другое приложение. В этом случае чтобы его установить, новая версия должна будет иметь другой название пакета, нежели старая.

Во-первых, в Android Studio выберем в меню пункт **Build -> Generate Signed APK**. После этого нам откроется окно мастера:

![Generate Signed APK](https://metanit.com/java/android/pics/signedapk.png)

Нажмем на кнопку `Create new...`. После этого нам откроется окно создания ключа:

![Создание APK в Android](https://metanit.com/java/android/pics/keystore.png)

Введем в поле `Key store path` путь к файлу сетификата, который будет создан. Если указанной папки не существует, то ее надо создать или определить существующую папку.

В поле Password/Confirm указываем пароль.

В поле `Alias` указываем псевдоним. Можно поставить произвольное название.

В поле `First and Last Name` вписываем имя и фамилию. И далее пишим подразделение, организацию, город, страну и код страны.

В конце нажимаем OK.

После этого автоматически обновится первое окошко:

![Создание подписанного APK и сертификата](https://metanit.com/java/android/pics/signedapk2.png)

Далее нажмем на кнопку Next:

![undefined](https://metanit.com/java/android/pics/signedapk3.png)

Финальное окно покажет нам путь к каталогу, где будет находиться подписанное приложение apk в release-версии. Нажмем на Finish.

Теперь по указанному пути можно будет найти подписанный apk, который будет иметь название app-release.apk:

![undefined](https://metanit.com/java/android/pics/signedapk4.png)

Мы можем переименовать файл, сохранив его расширение и выложить в Play Market или на любой сайт или сразу загрузить на мобильное устройство. После загрузки на телефон/планшет достоточно нажать на него, и с помощью стандартного установщика пакетов приложение будет установлено. Правда, здесь также надо учитывать, что если мы устанавливаем приложение не из Play Market, то в настройках надо разрешить установку из других источниках - `Безопасность->Неизвестные источники (Разрешить установку приложений из других источников)`


> Материал взят с сайта metanit.com