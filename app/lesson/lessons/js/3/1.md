# Функциональное программирование

## Функции

Функции представляют собой набор инструкций, выполняющих определенное действие или вычисляющих определенное значение.

Синтаксис определения функции:

```js
function имя_функции([параметр [, ...]]){

    // Инструкции
}
```

Определение функции начинается с ключевого слова **function**, после которого следует имя функции. 
Наименование функции подчиняется тем же правилам, что и наименование переменной: оно может содержать только цифры, буквы, символы подчеркивания и доллара ($) и 
должно начинаться с буквы, символа подчеркивания или доллара.

После имени функции в скобках идет перечисление параметров. Даже если параметров у функции нет, то просто идут пустые скобки. Затем в фигурных скобках идет тело функции, содержащее набор инструкций.

Определим простейшую функцию:

```js
function display(){

    document.write("функция в JavaScript");
}
```

Данная функция называется `display()`. Она не принимает никаких параметров и все, что она делает, это пишет на веб-страницу строку.

Однако простого определения функции еще недостаточно, чтобы она заработала. На надо еще ее вызвать:

```html
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
</head>
<body>
<script>
function display(){

    document.write("функция в JavaScript");
}
display();
</script>
</body>
</html>
```

Необязательно давать функциям определенное имя. Можно использовать анонимные функции:

```js
var display = function(){  // определение функции

	document.write("функция в JavaScript");
}
display();
```

Фактически мы определяем переменную display и присваиваем ей ссылку на функцию. А затем по имени переменной функция вызывается.

Также мы можем динамически присваивать функции для переменной:

```js
function goodMorning(){

	document.write("Доброе утро");
}
function goodEvening(){

	document.write("Добрый вечер");
}
var message = goodMorning;
message(); // Доброе утро
message = goodEvening;
message(); // Добрый вечер
```

### Параметры функции

Рассмотрим передачу параметров:

```js
function display(x){  // определение функции

	var z = x * x;
    document.write(x + " в квадрате равно " + z);
}

display(5); // вызов функции
```

Функция display принимает один параметр - x. Поэтому при вызове функции мы можем передать для него значение, например, число 5, как в данном случае.

Если функция принимает несколько параметров, то с помощью spread-оператора ... мы можем передать набор значений для этих параметров из массива:

```js
function sum(a, b, c){
	let d = a + b + c;
	console.log(d);
}
sum(1, 2, 3);
let nums = [4, 5, 6];
sum(...nums);
```

Во втором случае в функцию передается числа из массива nums. Но чтобы передавался не просто массив, как одно значение, а именно числа из этого массива, 
применяется spread-оператор (многоточие `...`).

### Необязательные параметры

Функция может принимать множество параметров, но при этом часть или все параметры могут быть необязательными. Если для параметров не передается значение, то по умолчанию 
они имеют значение "undefined".

```js
function display(x, y){

	if(y === undefined) y = 5;
	if(x === undefined) x = 8;
    let z = x * y;
    console.log(z);
}
display();	// 40
display(6); // 30
display(6, 4) // 24
```

Здесь функция display принимает два параметра. При вызове функции мы можем проверить их значения. 
При этом, вызывая функцию, необязательно передавать для этих параметров значения. Для проверки наличия значения параметров используется сравнение со значением `undefined`.

Есть и другой способ определения значения для параметров по умолчанию:

```js
function display(x = 5, y = 10){
    let z = x * y;
    console.log(z);
}
display();		// 50
display(6); 	// 60
display(6, 4) 	// 24
```

Если параметрам x и y не передаются значения, то они получаются в качестве значений числа 5 и 10 соответствено. Такой способ более лаконичен и интуитивен, чем 
сравнение с undefined.

При этом значение параметра по умолчанию может быть производным, представлять выражение:

```js
function display(x = 5, y = 10 + x){
    let z = x * y;
    console.log(z);
}
display();		// 75
display(6); 	// 96
display(6, 4) 	// 24
```

В данном случае значение параметра y зависит от значения x.

При необходимости мы можем получить все переданные параметры через глобально доступный массив **arguments**:

```js
function display(){
	var z = 1;
	for(var i=0; i<arguments.length; i++)
		z *= arguments[i];
    console.log(z);
}
display(6); // 6
display(6, 4) // 24
display(6, 4, 5) // 120
```

При этом даже не важно, что при определении функции мы не указали никаких параметров, мы все равно можем их передать и получить их значения через массив arguments.

### Неопределенное количество параметров

С помощью spread-оператора мы можем указать, что с помощью параметра можно передать переменное количество значений:

```js
function display(season, ...temps){
	console.log(season);
	for(index in temps){
		console.log(temps[index]);
	}
}
display("Весна", -2, -3, 4, 2, 5);
display("Лето", 20, 23, 31);
```

В данном случае второй параметр `...temps` указывает, что вместо него можно передать разное количество значений. В самой функции temps 
фактически представляет массив переданных значений, которые мы можем получить. При этом несмотря на это, при вызове функции в нее передается не массив, а именно отдельные значения.

Консольный вывод:

```browser
Весна
-2
-3
4
2
5
Лето
20
23
31
```

### Результат функции

Функция может возвращать результат. Для этого используется оператор **return**:

```js
var y = 5;
var z = square(y);
document.write(y + " в квадрате равно " + z);

function square(x) {
  return x * x;
}
```

После оператора return идет значение, которое надо возвратить из метода. В данном случае это квадрат числа х.

После получения результата функции мы можем присвоить его какой-либо другой переменной:

```js
var z = square(y);
```

### Функции в качестве параметров

Функции могут выступать в качестве параметров других функций:

```js
function sum(x, y){
	return x + y;
}

function subtract(x, y){
	return x - y;
}

function operation(x, y, func){
 
	var result = func(x, y);
	console.log(result);
}

console.log("Sum");
operation(10, 6, sum);	// 16

console.log("Subtract");
operation(10, 6, subtract);	// 4
```

Функция `operation` принимает три параметра: x, y и func. func - представляет функцию, причем на момент определения operation 
не важно, что это будет за функция. Единственное, что известно, что функция func может принимать два параметра и возвращать значение, которое затем 
отображается в консоли браузера. Поэтому мы можем определить различные функции (например, функции sum и subtract в данном случае) и передавать их 
в вызов функции operation.

### Возвращение функции из функции

Одна функция может возвращать другую функцию:

```js
function menu(n){
 
	if(n==1) return function(x, y){ return x+y;}
	else if(n==2) return function(x, y){ return x - y;}
	else if(n==3) return function(x, y){ return x * y;}
	return undefined;
}

for(var i=1; i < 5; i++){
	var action = menu(i);
	if(action!==undefined){
		var result = action(5, 4);
		console.log(result);
	}
}
```

В данном случае функция `menu` в зависимости от переданного в нее значения возвращает одну из трех функций или undefined.

