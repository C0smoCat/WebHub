extends ../layout

block head
    title Форум - WebHub
    style
        include style.css

block content
    form(
        class="example"
        action="/forum"
        method="GET"
    )
        if user.is_authorised
            button(type="add") +
        else
            a(href="/login?redirect=/forum") +
        input(type="text" placeholder="Поиск темы" name="q" value=search_query)
        button(type="submit")
            p Поиск
    if user.is_authorised
        form(class="new_f")
            h1 Добавление нового обсуждения
            div
                div(class='lip')
                    label Тема обсуждения
                    input(type="text")
                    label Ваше сообщение
                    input(type="textarea")
                    input(type="submit" id="spo_sub" value='Изменить')
                div
                    img(src='/avatars/ava16.png')
                    button Загрузить...
    if themes.length > 0
        each theme, index in themes
            a(href=theme.url class="theme")
                div
                    img(src=theme.avatar)
                    div
                        p(style='font-weight: bolder;')=theme.title
                        p(style='color: #ccc')=theme.last_message
    else
        p Упс, ничего нет :(
    div(class='more')
        if 1 < page
            a(href=`/forum?q=${search_query}&page=${page - 1}`) <<
        if page < max_page || 10
            a(href=`/forum?q=${search_query}&page=${page + 1}`) >>